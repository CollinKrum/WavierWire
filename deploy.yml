services:
  - type: web
    name: wavierwire
    env: node
    buildCommand: |
      # Install R
      apt-get update
      apt-get install -y r-base
      
      # Install R packages
      R -e "install.packages(c('ffscrapr', 'jsonlite', 'dplyr'), repos='http://cran.r-project.org')"
      
      # Install Node dependencies
      npm install
      
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: SWID
        fromService:
          type: web
          name: wavierwire
          property: SWID
      - key: ESPN_S2
        fromService:
          type: web
          name: wavierwire
          property: ESPN_S2
